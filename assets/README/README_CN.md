<div align="center">

<img src="../../assets/logo-ver2.png" alt="DeepTutor Logo" width="150" style="border-radius: 15px;">

# DeepTutor: æ‚¨çš„ä¸ªäººå­¦ä¹ åŠ©æ‰‹

[![Python](https://img.shields.io/badge/Python-3.10%2B-3776AB?style=flat-square&logo=python&logoColor=white)](https://www.python.org/downloads/)
[![Next.js](https://img.shields.io/badge/Next.js-14-000000?style=flat-square&logo=next.js&logoColor=white)](https://nextjs.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.100+-009688?style=flat-square&logo=fastapi&logoColor=white)](https://fastapi.tiangolo.com/)
[![License](https://img.shields.io/badge/License-AGPL--3.0-blue?style=flat-square)](LICENSE)
[![Feishu](https://img.shields.io/badge/Feishu-Group-blue?style=flat)](./Communication.md)
[![WeChat](https://img.shields.io/badge/WeChat-Group-green?style=flat&logo=wechat)](./Communication.md)



[**å¿«é€Ÿå¼€å§‹**](#å¿«é€Ÿå¼€å§‹) Â· [**æ ¸å¿ƒæ¨¡å—**](#æ ¸å¿ƒæ¨¡å—) Â· [**å¸¸è§é—®é¢˜**](#å¸¸è§é—®é¢˜)

[ğŸ‡¬ğŸ‡§ English](../../README.md) Â· [ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª](README_JA.md) Â· [ğŸ‡ªğŸ‡¸ EspaÃ±ol](README_ES.md) Â· [ğŸ‡«ğŸ‡· FranÃ§ais](README_FR.md) Â· [ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©](README_AR.md)

</div>

<div align="center">

| âš¡ **æµ·é‡æ–‡æ¡£çŸ¥è¯†é—®ç­”**  |  ğŸ“ˆ **äº¤äº’å¼å­¦ä¹ å¯è§†åŒ–**  | <br>
| ğŸ§  **çŸ¥è¯†å¼ºåŒ–**  |  ğŸ”¬ **æ·±åº¦ç ”ç©¶ä¸æƒ³æ³•ç”Ÿæˆ** |

</div>

---

## DeepTutor çš„æ ¸å¿ƒåŠŸèƒ½

### ğŸ“š æµ·é‡æ–‡æ¡£çŸ¥è¯†é—®ç­”
â€¢ **æ™ºèƒ½çŸ¥è¯†åº“**ï¼šä¸Šä¼ æ•™ç§‘ä¹¦ã€ç ”ç©¶è®ºæ–‡ã€æŠ€æœ¯æ‰‹å†Œå’Œé¢†åŸŸç‰¹å®šæ–‡æ¡£ã€‚æ„å»ºå…¨é¢çš„ AI é©±åŠ¨çŸ¥è¯†åº“ï¼Œå®ç°å³æ—¶è®¿é—®ã€‚<br>
â€¢ **å¤š Agent é—®é¢˜æ±‚è§£**ï¼šåŒå¾ªç¯æ¨ç†æ¶æ„ï¼Œé›†æˆ RAGã€ç½‘ç»œæœç´¢ã€è®ºæ–‡æœç´¢å’Œä»£ç æ‰§è¡Œâ€”â€”æä¾›å¸¦ç²¾ç¡®å¼•ç”¨çš„åˆ†æ­¥è§£å†³æ–¹æ¡ˆã€‚

### ğŸ¨ äº¤äº’å¼å­¦ä¹ å¯è§†åŒ–
â€¢ **çŸ¥è¯†ç®€åŒ–ä¸è§£é‡Š**ï¼šå°†å¤æ‚æ¦‚å¿µã€çŸ¥è¯†å’Œç®—æ³•è½¬åŒ–ä¸ºæ˜“äºç†è§£çš„å¯è§†åŒ–è¾…åŠ©å·¥å…·ã€è¯¦ç»†çš„åˆ†æ­¥åˆ†è§£å’Œå¼•äººå…¥èƒœçš„äº¤äº’å¼æ¼”ç¤ºã€‚<br>
â€¢ **ä¸ªæ€§åŒ–é—®ç­”**ï¼šä¸Šä¸‹æ–‡æ„ŸçŸ¥å¯¹è¯ï¼Œé€‚åº”æ‚¨çš„å­¦ä¹ è¿›åº¦ï¼Œæä¾›äº¤äº’å¼é¡µé¢å’ŒåŸºäºä¼šè¯çš„çŸ¥è¯†è·Ÿè¸ªã€‚

### ğŸ¯ çŸ¥è¯†å¼ºåŒ–ä¸ç»ƒä¹ é¢˜ç›®ç”Ÿæˆå™¨
â€¢ **æ™ºèƒ½ç»ƒä¹ åˆ›å»º**ï¼šæ ¹æ®æ‚¨å½“å‰çš„çŸ¥è¯†æ°´å¹³å’Œç‰¹å®šå­¦ä¹ ç›®æ ‡ï¼Œç”Ÿæˆæœ‰é’ˆå¯¹æ€§çš„æµ‹éªŒã€ç»ƒä¹ é¢˜å’Œå®šåˆ¶è¯„ä¼°ã€‚<br>
â€¢ **çœŸå®è€ƒè¯•æ¨¡æ‹Ÿ**ï¼šä¸Šä¼ å‚è€ƒè€ƒè¯•ï¼Œç”Ÿæˆå®Œç¾åŒ¹é…åŸå§‹é£æ ¼ã€æ ¼å¼å’Œéš¾åº¦çš„ç»ƒä¹ é¢˜â€”â€”ä¸ºæ‚¨æä¾›çœŸå®è€ƒè¯•å‡†å¤‡ã€‚

### ğŸ” æ·±åº¦ç ”ç©¶ä¸æƒ³æ³•ç”Ÿæˆ
â€¢ **å…¨é¢ç ”ç©¶ä¸æ–‡çŒ®ç»¼è¿°**ï¼šé€šè¿‡ç³»ç»Ÿåˆ†æè¿›è¡Œæ·±å…¥çš„ä¸“é¢˜æ¢ç´¢ã€‚è¯†åˆ«æ¨¡å¼ï¼Œè¿æ¥è·¨å­¦ç§‘çš„ç›¸å…³æ¦‚å¿µï¼Œç»¼åˆç°æœ‰ç ”ç©¶å‘ç°ã€‚<br>
â€¢ **æ–°é¢–è§è§£å‘ç°**ï¼šç”Ÿæˆç»“æ„åŒ–å­¦ä¹ ææ–™å¹¶å‘ç°çŸ¥è¯†ç©ºç™½ã€‚é€šè¿‡æ™ºèƒ½è·¨é¢†åŸŸçŸ¥è¯†ç»¼åˆï¼Œè¯†åˆ«æœ‰å‰æ™¯çš„æ–°ç ”ç©¶æ–¹å‘ã€‚

---

<div align="center">
  <img src="../../assets/figs/title_gradient.svg" alt="All-in-One Tutoring System" width="70%">
</div>

<br>

<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” Core Learning Experience â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->

<table>
<tr>
<td width="50%" align="center" valign="top">

<h3>ğŸ“š æµ·é‡æ–‡æ¡£çŸ¥è¯†é—®ç­”</h3>
<a href="#problem-solving-agent">
<img src="../../assets/gifs/solve.gif" width="100%">
</a>
<br>
<sub>æ–‡æ¡£é—®ç­”å’Œåˆ†æ­¥é—®é¢˜æ±‚è§£</sub>

</td>
<td width="50%" align="center" valign="top">

<h3>ğŸ¨ äº¤äº’å¼å­¦ä¹ å¯è§†åŒ–</h3>
<a href="#guided-learning">
<img src="../../assets/gifs/guided-learning.gif" width="100%">
</a>
<br>
<sub>å¸¦çŸ¥è¯†å¯è§†åŒ–è§£é‡Šçš„äº¤äº’å¼ AI å­¦ä¹ </sub>

</td>
</tr>
</table>

<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” Practice & Reinforcement â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->

<h3 align="center">ğŸ¯ çŸ¥è¯†å¼ºåŒ–</h3>

<table>
<tr>
<td width="50%" valign="top" align="center">

<a href="#question-generator">
<img src="../../assets/gifs/question-1.gif" width="100%">
</a>

**è‡ªå®šä¹‰é¢˜ç›®**  
<sub>å¸¦å³æ—¶åé¦ˆçš„è‡ªåŠ¨éªŒè¯ç»ƒä¹ é¢˜</sub>

</td>
<td width="50%" valign="top" align="center">

<a href="#question-generator">
<img src="../../assets/gifs/question-2.gif" width="100%">
</a>

**æ¨¡ä»¿é¢˜ç›®**  
<sub>å…‹éš†è€ƒè¯•é£æ ¼ä»¥è¿›è¡ŒçœŸå®ç»ƒä¹ </sub>

</td>
</tr>
</table>

<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” Research & Creation â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->

<h3 align="center">ğŸ” æ·±åº¦ç ”ç©¶ä¸æƒ³æ³•ç”Ÿæˆ</h3>

<table>
<tr>
<td width="33%" align="center">

<a href="#deep-research">
<img src="../../assets/gifs/deepresearch.gif" width="100%">
</a>

**æ·±åº¦ç ”ç©¶**  
<sub>å¸¦æ–‡çŒ®ç»¼è¿°çš„ç½‘ç»œå’Œè®ºæ–‡æœç´¢</sub>

</td>
<td width="33%" align="center">

<a href="#idea-generation">
<img src="../../assets/gifs/ideagen.gif" width="100%">
</a>

**è‡ªåŠ¨åŒ–æƒ³æ³•ç”Ÿæˆ**  
<sub>ç³»ç»ŸåŒ–å¤´è„‘é£æš´å’Œæ¦‚å¿µç»¼åˆ</sub>

</td>
<td width="33%" align="center">

<a href="#co-writer">
<img src="../../assets/gifs/co-writer.gif" width="100%">
</a>

**äº¤äº’å¼æƒ³æ³•ç”Ÿæˆ**  
<sub>åŸºäº RAG çš„æƒ³æ³•ç”Ÿæˆï¼Œå…·æœ‰å¤šæºè§è§£</sub>

</td>
</tr>
</table>

<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” Knowledge Infrastructure â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->

<h3 align="center">ğŸ—ï¸ ä¸€ä½“åŒ–çŸ¥è¯†ç³»ç»Ÿ</h3>

<table>
<tr>
<td width="50%" align="center">

<a href="#dashboard--knowledge-base-management">
<img src="../../assets/gifs/knowledge_bases.png" width="100%">
</a>

**ä¸ªäººçŸ¥è¯†åº“**  
<sub>æ„å»ºå’Œç»„ç»‡æ‚¨è‡ªå·±çš„çŸ¥è¯†åº“</sub>

</td>
<td width="50%" align="center">

<a href="#notebook">
<img src="../../assets/gifs/notebooks.png" width="100%">
</a>

**ä¸ªäººç¬”è®°æœ¬**  
<sub>æ‚¨å­¦ä¹ ä¼šè¯çš„ä¸Šä¸‹æ–‡è®°å¿†</sub>

</td>
</tr>
</table>

<p align="center">
  <sub>ğŸŒ™ åœ¨ <b>æš—è‰²æ¨¡å¼</b> ä¸‹ä½¿ç”¨ DeepTutorï¼</sub>
</p>

---

## ğŸ›ï¸ DeepTutor çš„æ¡†æ¶

<div align="center">
<img src="../../assets/figs/full-pipe.png" alt="DeepTutor Full-Stack Workflow" width="100%">
</div>

### ğŸ’¬ ç”¨æˆ·ç•Œé¢å±‚
â€¢ **ç›´è§‚äº¤äº’**ï¼šç®€å•çš„åŒå‘æŸ¥è¯¢-å“åº”æµç¨‹ï¼Œå®ç°ç›´è§‚äº¤äº’ã€‚<br>
â€¢ **ç»“æ„åŒ–è¾“å‡º**ï¼šç»“æ„åŒ–å“åº”ç”Ÿæˆï¼Œå°†å¤æ‚ä¿¡æ¯ç»„ç»‡æˆå¯æ“ä½œçš„è¾“å‡ºã€‚

### ğŸ¤– æ™ºèƒ½ Agent æ¨¡å—
â€¢ **é—®é¢˜æ±‚è§£ä¸è¯„ä¼°**ï¼šåˆ†æ­¥é—®é¢˜æ±‚è§£å’Œå®šåˆ¶è¯„ä¼°ç”Ÿæˆã€‚<br>
â€¢ **ç ”ç©¶ä¸å­¦ä¹ **ï¼šç”¨äºä¸“é¢˜æ¢ç´¢çš„æ·±åº¦ç ”ç©¶å’Œå¸¦å¯è§†åŒ–çš„å¼•å¯¼å¼å­¦ä¹ ã€‚<br>
â€¢ **æƒ³æ³•ç”Ÿæˆ**ï¼šè‡ªåŠ¨åŒ–å’Œäº¤äº’å¼æ¦‚å¿µå¼€å‘ï¼Œå…·æœ‰å¤šæºè§è§£ã€‚

### ğŸ”§ å·¥å…·é›†æˆå±‚
â€¢ **ä¿¡æ¯æ£€ç´¢**ï¼šRAG æ··åˆæ£€ç´¢ã€å®æ—¶ç½‘ç»œæœç´¢å’Œå­¦æœ¯è®ºæ–‡æ•°æ®åº“ã€‚<br>
â€¢ **å¤„ç†ä¸åˆ†æ**ï¼šPython ä»£ç æ‰§è¡Œã€æŸ¥è¯¢é¡¹æŸ¥æ‰¾å’Œç”¨äºæ–‡æ¡£åˆ†æçš„ PDF è§£æã€‚

### ğŸ§  çŸ¥è¯†ä¸è®°å¿†åŸºç¡€
â€¢ **çŸ¥è¯†å›¾è°±**ï¼šå®ä½“-å…³ç³»æ˜ å°„ï¼Œç”¨äºè¯­ä¹‰è¿æ¥å’ŒçŸ¥è¯†å‘ç°ã€‚<br>
â€¢ **å‘é‡å­˜å‚¨**ï¼šåŸºäºåµŒå…¥çš„è¯­ä¹‰æœç´¢ï¼Œç”¨äºæ™ºèƒ½å†…å®¹æ£€ç´¢ã€‚<br>
â€¢ **è®°å¿†ç³»ç»Ÿ**ï¼šä¼šè¯çŠ¶æ€ç®¡ç†å’Œå¼•ç”¨è·Ÿè¸ªï¼Œç”¨äºä¸Šä¸‹æ–‡è¿ç»­æ€§ã€‚

## ğŸ“‹ å¾…åšäº‹é¡¹

> ğŸŒŸ Star ä»¥å…³æ³¨æˆ‘ä»¬çš„æœªæ¥æ›´æ–°ï¼
- [ ] é¡¹ç›®å¼å­¦ä¹ 
- [ ] ä»æƒ³æ³•ç”Ÿæˆè¿›è¡Œæ·±åº¦ç¼–ç 
- [ ] ä¸ªæ€§åŒ–è®°å¿†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šå…‹éš†ä»“åº“å¹¶åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/HKUDS/DeepTutor.git
cd DeepTutor

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆé€‰æ‹©ä¸€ç§æ–¹å¼ï¼‰

# é€‰é¡¹ Aï¼šä½¿ç”¨ condaï¼ˆæ¨èï¼‰
conda create -n aitutor python=3.10
conda activate aitutor

# é€‰é¡¹ Bï¼šä½¿ç”¨ venv
python -m venv venv
# åœ¨ Windows:
venv\Scripts\activate
# åœ¨ macOS/Linux:
source venv/bin/activate
```

### ç¬¬äºŒæ­¥ï¼šå®‰è£…ä¾èµ–

è¿è¡Œä¸€é”®å®‰è£…è„šæœ¬è‡ªåŠ¨å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š

```bash
# æ¨èï¼šä½¿ç”¨ bash è„šæœ¬
bash scripts/install_all.sh

# æˆ–ä½¿ç”¨ Python è„šæœ¬
python scripts/install_all.py

# è¯´æ˜ï¼šå®‰è£…è„šæœ¬ä¼šæ£€æµ‹ conda/venv ç­‰éš”ç¦»ç¯å¢ƒï¼›å¦‚æœæœªæ£€æµ‹åˆ°éš”ç¦»ç¯å¢ƒï¼Œä¼šç»™å‡ºè­¦å‘Šï¼Œä½†ä»ä¼šç»§ç»­å®‰è£…ã€‚

# æˆ–æ‰‹åŠ¨å®‰è£…
pip install -r requirements.txt
npm install
```

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åŸºäº `.env.example` åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# ä» .env.example æ¨¡æ¿å¤åˆ¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
cp .env.example .env

# ç„¶åä½¿ç”¨æ‚¨çš„ API å¯†é’¥ç¼–è¾‘ .env æ–‡ä»¶ï¼š
```

### ç¬¬å››æ­¥ï¼šé…ç½®ç«¯å£å’Œ LLM å‚æ•° *(å¯é€‰)*

é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”ç”¨ä½¿ç”¨ï¼š
- **åç«¯ (FastAPI)**: `8001`
- **å‰ç«¯ (Next.js)**: `3782`

æ‚¨å¯ä»¥é€šè¿‡ç¼–è¾‘ `config/main.yaml` ä¸­çš„ `server.backend_port` å’Œ `server.frontend_port` å€¼æ¥ä¿®æ”¹è¿™äº›ç«¯å£ã€‚

**LLM å‚æ•°**ï¼šæ‰€æœ‰ agent çš„ `temperature` å’Œ `max_tokens` è®¾ç½®éƒ½é›†ä¸­åœ¨ `config/agents.yaml` ä¸­ã€‚æ¯ä¸ªæ¨¡å—ï¼ˆguideã€solveã€researchã€questionã€ideagenã€co_writerï¼‰éƒ½æœ‰è‡ªå·±çš„ä¸€ç»„å‚æ•°ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚é˜…[é…ç½®æ–‡æ¡£](config/README.md)ã€‚

### ç¬¬äº”æ­¥ï¼šä½¿ç”¨æˆ‘ä»¬çš„æ¼”ç¤º *(å¯é€‰)*

ä¸ºäº†å¿«é€Ÿä½“éªŒæˆ‘ä»¬çš„ç³»ç»Ÿï¼Œæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªé¢„å¤„ç†çš„çŸ¥è¯†åº“ä»¥åŠä¸€ç³»åˆ—å…·æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜å’Œä½¿ç”¨ç¤ºä¾‹ã€‚

<details>
<summary><b>ç ”ç©¶è®ºæ–‡é›†åˆ</b> â€” 5 ç¯‡è®ºæ–‡ï¼ˆ20-50 é¡µæ¯ç¯‡ï¼‰</summary>

æ¥è‡ªæˆ‘ä»¬å®éªŒå®¤çš„ 5 ç¯‡ RAG å’Œ Agent é¢†åŸŸçš„ç²¾é€‰ç ”ç©¶è®ºæ–‡ã€‚æ­¤æ¼”ç¤ºä»£è¡¨å…·æœ‰**å¹¿æ³›çŸ¥è¯†è¦†ç›–**çš„ç ”ç©¶åœºæ™¯ã€‚

**ä½¿ç”¨çš„è®ºæ–‡**: [AI-Researcher](https://github.com/HKUDS/AI-Researcher) | [AutoAgent](https://github.com/HKUDS/AutoAgent) | [RAG-Anything](https://github.com/HKUDS/RAG-Anything) | [LightRAG](https://github.com/HKUDS/LightRAG) | [VideoRAG](https://github.com/HKUDS/VideoRAG)

</details>

<details>
<summary><b>æ•°æ®ç§‘å­¦æ•™ç§‘ä¹¦</b> â€” 8 ç« ï¼Œ296 é¡µ</summary>

ä¸€æœ¬ç»¼åˆæ€§ä¸”å…·æœ‰æŒ‘æˆ˜æ€§çš„æ•°æ®ç§‘å­¦æ•™ç§‘ä¹¦ã€‚æ­¤æ¼”ç¤ºä»£è¡¨å…·æœ‰**æ·±å±‚çŸ¥è¯†æ·±åº¦**çš„å­¦ä¹ åœºæ™¯ã€‚

**ä¹¦ç±é“¾æ¥**: [Deep Representation Learning Book](https://ma-lab-berkeley.github.io/deep-representation-learning-book/)
</details>

<br>

**ä¸‹è½½å’Œè®¾ç½®ï¼š**

1. ä»ä»¥ä¸‹ä½ç½®ä¸‹è½½æ¼”ç¤ºåŒ…ï¼š[Google Drive](https://drive.google.com/drive/folders/1iWwfZXiTuQKQqUYb5fGDZjLCeTUP6DA6?usp=sharing)
2. å°†å‹ç¼©æ–‡ä»¶ç›´æ¥è§£å‹åˆ° `data/` ç›®å½•
3. å¯åŠ¨é¡¹ç›®åï¼ŒçŸ¥è¯†åº“å°†è‡ªåŠ¨åœ¨ç³»ç»Ÿä¸­å¯ç”¨

> **æ³¨æ„ï¼š** æˆ‘ä»¬åœ¨åˆå§‹åŒ–çŸ¥è¯†åº“æ—¶ä½¿ç”¨ `text-embedding-3-large` ä½œä¸ºåµŒå…¥æ¨¡å‹ï¼Œç»´åº¦ä¸º `dimensions = 3072`ã€‚è¯·ç¡®ä¿æ‚¨çš„åµŒå…¥æ¨¡å‹ç»´åº¦ä¹Ÿæ˜¯ 3072ã€‚

### ç¬¬å…­æ­¥ï¼šå¯åŠ¨åº”ç”¨

```bash
# ç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
conda activate aitutor  # æˆ–: source venv/bin/activate

# å¯åŠ¨ Web ç•Œé¢ï¼ˆå‰ç«¯ + åç«¯ï¼‰
python scripts/start_web.py

# æˆ–ä»…å¯åŠ¨ CLI ç•Œé¢
python scripts/start.py

# è¦åœæ­¢æœåŠ¡ï¼Œè¯·æŒ‰ Ctrl+C
```

### ç¬¬ä¸ƒæ­¥ï¼šåˆ›å»ºè‡ªå·±çš„çŸ¥è¯†åº“

å¯åŠ¨åº”ç”¨åï¼Œæ‚¨å¯ä»¥é€šè¿‡ Web ç•Œé¢åˆ›å»ºè‡ªå·±çš„çŸ¥è¯†åº“ï¼Œæ”¯æŒä»»ä½•æ¨¡æ€ã€‚

1. **è®¿é—®çŸ¥è¯†åº“é¡µé¢**ï¼šè®¿é—® http://localhost:{frontend_port}/knowledge
2. **åˆ›å»ºæ–°çŸ¥è¯†åº“**ï¼šç‚¹å‡»"æ–°å»ºçŸ¥è¯†åº“"æŒ‰é’®
3. **å‘½åçŸ¥è¯†åº“**ï¼šä¸ºæ‚¨çš„çŸ¥è¯†åº“è¾“å…¥å”¯ä¸€åç§°
4. **ä¸Šä¼ æ–‡ä»¶**ï¼šä¸Šä¼ ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶
5. **ç­‰å¾…å¤„ç†**ï¼šç³»ç»Ÿå°†åœ¨åå°è‡ªåŠ¨å¤„ç†æ‚¨çš„æ–‡ä»¶
   - åœ¨è¿è¡Œ `start_web.py` çš„ç»ˆç«¯ä¸­ç›‘æ§åˆ›å»ºè¿›åº¦
   - å¤„ç†å®Œæˆåï¼ŒçŸ¥è¯†åº“å°†å¯ç”¨

> **æç¤ºï¼š** å¤§æ–‡ä»¶å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ‰èƒ½å¤„ç†ã€‚æ‚¨å¯ä»¥ä¸€æ¬¡ä¸Šä¼ å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰¹å¤„ç†ã€‚

### è®¿é—® URL

| æœåŠ¡ | ç½‘å€ | æè¿° |
|:---:|:---|:---|
| **å‰ç«¯** | http://localhost:{frontend_port} | ä¸» Web ç•Œé¢ |
| **API æ–‡æ¡£** | http://localhost:{backend_port}/docs | äº¤äº’å¼ API æ–‡æ¡£ |
| **å¥åº·æ£€æŸ¥** | http://localhost:{backend_port}/api/v1/knowledge/health | ç³»ç»Ÿå¥åº·æ£€æŸ¥ |

---

## ğŸ“‚ æ•°æ®å­˜å‚¨

æ‰€æœ‰ç”¨æˆ·ç”Ÿæˆçš„å†…å®¹å’Œç³»ç»Ÿæ•°æ®éƒ½å­˜å‚¨åœ¨ `data/` æ–‡ä»¶å¤¹ä¸­ï¼š

```
data/
â”œâ”€â”€ knowledge_bases/              # çŸ¥è¯†åº“å­˜å‚¨
â””â”€â”€ user/                         # ç”¨æˆ·æ´»åŠ¨æ•°æ®
    â”œâ”€â”€ solve/                    # é—®é¢˜æ±‚è§£ç»“æœå’Œäº§ç‰©
    â”œâ”€â”€ question/                 # ç”Ÿæˆçš„é¢˜ç›®
    â”œâ”€â”€ research/                 # ç ”ç©¶æŠ¥å‘Šå’Œç¼“å­˜
    â”œâ”€â”€ co-writer/                # Co-Writer æ–‡æ¡£å’ŒéŸ³é¢‘æ–‡ä»¶
    â”œâ”€â”€ notebook/                 # ç¬”è®°æœ¬è®°å½•å’Œå…ƒæ•°æ®
    â”œâ”€â”€ guide/                    # å¼•å¯¼å¼å­¦ä¹ ä¼šè¯
    â”œâ”€â”€ logs/                     # ç³»ç»Ÿæ—¥å¿—
    â””â”€â”€ run_code_workspace/       # ä»£ç æ‰§è¡Œå·¥ä½œåŒº
```

æ‰§è¡Œä»»ä½•æ´»åŠ¨æ—¶ï¼Œæ‰€æœ‰ç»“æœéƒ½ä¼šè‡ªåŠ¨ä¿å­˜ã€‚å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå°†è‡ªåŠ¨åˆ›å»ºã€‚

---

## ğŸ“¦ æ ¸å¿ƒæ¨¡å—

<details>
<summary><b>ğŸ§  æ™ºèƒ½è§£é¢˜</b></summary>

<details>
<summary><b>æ¶æ„å›¾</b></summary>

![Smart Solver Architecture](../../assets/figs/solve.png)

</details>

> **æ™ºèƒ½é—®é¢˜æ±‚è§£ç³»ç»Ÿ**ï¼ŒåŸºäº **åˆ†æå¾ªç¯ + æ±‚è§£å¾ªç¯** åŒå¾ªç¯æ¶æ„ï¼Œæ”¯æŒå¤šæ¨¡å¼æ¨ç†å’ŒåŠ¨æ€çŸ¥è¯†æ£€ç´¢ã€‚

**æ ¸å¿ƒç‰¹æ€§**

| ç‰¹æ€§ | æè¿° |
|:---:|:---|
| åŒå¾ªç¯æ¶æ„ | **åˆ†æå¾ªç¯**ï¼šInvestigateAgent â†’ NoteAgent<br>**æ±‚è§£å¾ªç¯**ï¼šPlanAgent â†’ ManagerAgent â†’ SolveAgent â†’ CheckAgent â†’ æ ¼å¼åŒ– |
| å¤šAgentåä½œ | ä¸“ä¸šåŒ–Agentï¼šInvestigateAgentã€NoteAgentã€PlanAgentã€ManagerAgentã€SolveAgentã€CheckAgent |
| å®æ—¶æµå¼ä¼ è¾“ | WebSocket ä¼ è¾“ï¼Œå®æ—¶æ˜¾ç¤ºæ¨ç†è¿‡ç¨‹ |
| å·¥å…·é›†æˆ | RAG (naive/hybrid)ã€ç½‘ç»œæœç´¢ã€æŸ¥è¯¢é¡¹ã€ä»£ç æ‰§è¡Œ |
| æŒä¹…åŒ–è®°å¿† | åŸºäº JSON çš„è®°å¿†æ–‡ä»¶ç”¨äºä¸Šä¸‹æ–‡ä¿å­˜ |
| å¼•ç”¨ç®¡ç† | ç»“æ„åŒ–å¼•ç”¨å’Œå¼•ç”¨è¿½è¸ª |

**ä½¿ç”¨æ–¹æ³•**

1. è®¿é—® http://localhost:{frontend_port}/solver
2. é€‰æ‹©çŸ¥è¯†åº“
3. è¾“å…¥é—®é¢˜ï¼Œç‚¹å‡»"æ±‚è§£"
4. è§‚çœ‹å®æ—¶æ¨ç†è¿‡ç¨‹å’Œæœ€ç»ˆç­”æ¡ˆ

<details>
<summary><b>Python API</b></summary>

```python
import asyncio
from src.agents.solve import MainSolver

async def main():
    solver = MainSolver(kb_name="ai_textbook")
    result = await solver.solve(
        question="è®¡ç®— x=[1,2,3] å’Œ h=[4,5] çš„çº¿æ€§å·ç§¯",
        mode="auto"
    )
    print(result['formatted_solution'])

asyncio.run(main())
```

</details>

<details>
<summary><b>è¾“å‡ºä½ç½®</b></summary>

```
data/user/solve/solve_YYYYMMDD_HHMMSS/
â”œâ”€â”€ investigate_memory.json    # åˆ†æå¾ªç¯è®°å¿†
â”œâ”€â”€ solve_chain.json           # æ±‚è§£å¾ªç¯æ­¥éª¤å’Œå·¥å…·è®°å½•
â”œâ”€â”€ citation_memory.json       # å¼•ç”¨ç®¡ç†
â”œâ”€â”€ final_answer.md            # æœ€ç»ˆç­”æ¡ˆï¼ˆMarkdownï¼‰
â”œâ”€â”€ performance_report.json    # æ€§èƒ½ç›‘æ§
â””â”€â”€ artifacts/                 # ä»£ç æ‰§è¡Œè¾“å‡º
```

</details>

</details>

---

<details>
<summary><b>ğŸ“ é¢˜ç›®ç”Ÿæˆå™¨</b></summary>

<details>
<summary><b>æ¶æ„å›¾</b></summary>

![Question Generator Architecture](../../assets/figs/question-gen.png)

</details>

> **åŒAgentåä½œé¢˜ç›®ç”Ÿæˆç³»ç»Ÿ**ï¼ŒåŸºäº **ReAct** èŒƒå¼ï¼Œè‡ªåŠ¨ç”Ÿæˆå¹¶éªŒè¯é¢˜ç›®è´¨é‡ã€‚

**æ ¸å¿ƒç‰¹æ€§**

| ç‰¹æ€§ | æè¿° |
|:---:|:---|
| ReAct å¼•æ“ | å…·æœ‰è‡ªä¸»å†³ç­–çš„ QuestionGenerationAgent (think â†’ act â†’ observe) |
| çŸ¥è¯†æ£€æŸ¥ | Agent è¯„ä¼°æ£€ç´¢ç»“æœï¼ŒçŸ¥è¯†ä¸è¶³æ—¶æ‹’ç»ä»»åŠ¡ |
| éªŒè¯å·¥ä½œæµ | ç‹¬ç«‹éªŒè¯ï¼ŒåŒ…å«è¯¦ç»†åé¦ˆå’Œä¿®æ”¹å»ºè®® |
| é¢˜ç›®ç±»å‹ | å¤šé€‰é¢˜ã€å¡«ç©ºé¢˜ã€è®¡ç®—é¢˜ã€é—®ç­”é¢˜ç­‰ |
| è¿­ä»£ä¼˜åŒ– | å¤šè½®åä½œï¼ˆæœ€å¤š 10 è½®ï¼‰ï¼Œè‡ªåŠ¨ä¼˜åŒ– |
| æ‰¹é‡ç”Ÿæˆ | è‡ªåŠ¨éœ€æ±‚åˆ†è§£ï¼Œç‹¬ç«‹ä»»åŠ¡ä¿è¯ |
| è¯•å·æ¨¡ä»¿ | åŸºäºå‚è€ƒè¯•å·ç”Ÿæˆé¢˜ç›® |

**ä½¿ç”¨æ–¹æ³•**

1. è®¿é—® http://localhost:{frontend_port}/question
2. å¡«å†™è¦æ±‚ï¼ˆçŸ¥è¯†ç‚¹ã€éš¾åº¦ã€é¢˜å‹ï¼‰
3. ç‚¹å‡»"ç”Ÿæˆé¢˜ç›®"
4. æŸ¥çœ‹ç”Ÿæˆçš„é¢˜ç›®å’ŒéªŒè¯ç»“æœ

<details>
<summary><b>Python API</b></summary>

**å•é¢˜ç”Ÿæˆï¼š**
```python
import asyncio
from src.agents.question import AgentCoordinator

async def main():
    coordinator = AgentCoordinator(kb_name="ai_textbook")
    result = await coordinator.generate_question({
        "knowledge_point": "çº¿æ€§å·ç§¯",
        "difficulty": "medium",
        "question_type": "choice"
    })

    if result.get("success"):
        print(f"é¢˜ç›®: {result['question']['question']}")
    elif result.get("error") == "task_rejected":
        print(f"Agent æ‹’ç»: {result.get('reason')}")

asyncio.run(main())
```

**æ‰¹é‡ç”Ÿæˆï¼š**
```python
# è‡ªåŠ¨éœ€æ±‚åˆ†è§£
result = await coordinator.generate_questions_from_prompt(
    requirement_text="ç”Ÿæˆ 3 é“å…³äºå¤šå…ƒæé™çš„é¢˜ç›®",
    num_questions=3
)
```

</details>

<details>
<summary><b>è¾“å‡ºä½ç½®</b></summary>

```
data/user/question/question_YYYYMMDD_HHMMSS/
```

</details>

</details>

---

<details>
<summary><b>ğŸ“ å¼•å¯¼å¼å­¦ä¹ </b></summary>

<details>
<summary><b>æ¶æ„å›¾</b></summary>

![Guided Learning Architecture](../../assets/figs/guide.png)

</details>

> **ä¸ªæ€§åŒ–å­¦ä¹ ç³»ç»Ÿ**ï¼ŒåŸºäºç¬”è®°æœ¬å†…å®¹ï¼Œè‡ªåŠ¨ç”Ÿæˆé€’è¿›å¼å­¦ä¹ è·¯å¾„ï¼Œé€šè¿‡äº¤äº’å¼é¡µé¢å’Œæ™ºèƒ½é—®ç­”ã€‚

**æ ¸å¿ƒç‰¹æ€§**

| ç‰¹æ€§ | æè¿° |
|:---:|:---|
| å¤šAgentæ¶æ„ | **LocateAgent**ï¼šè¯†åˆ« 3-5 ä¸ªé€’è¿›çŸ¥è¯†ç‚¹<br>**InteractiveAgent**ï¼šè½¬æ¢ä¸ºå¯è§†åŒ– HTML é¡µé¢<br>**ChatAgent**ï¼šæä¾›ä¸Šä¸‹æ–‡é—®ç­”<br>**SummaryAgent**ï¼šç”Ÿæˆå­¦ä¹ æ€»ç»“ |
| æ™ºèƒ½çŸ¥è¯†å®šä½ | ç¬”è®°æœ¬å†…å®¹è‡ªåŠ¨åˆ†æ |
| äº¤äº’å¼é¡µé¢ | HTML é¡µé¢ç”Ÿæˆï¼ŒåŒ…å«é”™è¯¯ä¿®å¤ |
| æ™ºèƒ½é—®ç­” | ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç­”æ¡ˆå’Œè§£é‡Š |
| è¿›åº¦è¿½è¸ª | å®æ—¶çŠ¶æ€ä¸ä¼šè¯æŒä¹…åŒ– |
| è·¨ç¬”è®°æœ¬æ”¯æŒ | ä»å¤šä¸ªç¬”è®°æœ¬é€‰æ‹©è®°å½• |

**ä½¿ç”¨æµç¨‹**

1. **é€‰æ‹©ç¬”è®°æœ¬** â€” é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªç¬”è®°æœ¬ï¼ˆæ”¯æŒè·¨ç¬”è®°æœ¬é€‰æ‹©ï¼‰
2. **ç”Ÿæˆå­¦ä¹ è®¡åˆ’** â€” LocateAgent è¯†åˆ« 3-5 ä¸ªæ ¸å¿ƒçŸ¥è¯†ç‚¹
3. **å¼€å§‹å­¦ä¹ ** â€” InteractiveAgent ç”Ÿæˆ HTML å¯è§†åŒ–
4. **å­¦ä¹ äº’åŠ¨** â€” æé—®ï¼Œç‚¹å‡»"ä¸‹ä¸€æ­¥"ç»§ç»­
5. **å®Œæˆå­¦ä¹ ** â€” SummaryAgent ç”Ÿæˆå­¦ä¹ æ€»ç»“

<details>
<summary><b>è¾“å‡ºä½ç½®</b></summary>

```
data/user/guide/
â””â”€â”€ session_{session_id}.json    # å®Œæ•´ä¼šè¯çŠ¶æ€ã€çŸ¥è¯†ç‚¹ã€èŠå¤©å†å²
```

</details>

</details>

---

<details>
<summary><b>âœï¸ Co-Writer</b></summary>

<details>
<summary><b>æ¶æ„å›¾</b></summary>

![Co-Writer Architecture](../../assets/figs/co-writer.png)

</details>

> **æ™ºèƒ½ Markdown ç¼–è¾‘å™¨**ï¼Œæ”¯æŒ AI è¾…åŠ©å†™ä½œã€è‡ªåŠ¨æ ‡æ³¨å’Œ TTS å™è¿°ã€‚

**æ ¸å¿ƒç‰¹æ€§**

| ç‰¹æ€§ | æè¿° |
|:---:|:---|
| å¯Œæ–‡æœ¬ç¼–è¾‘ | å®Œæ•´ Markdown è¯­æ³•æ”¯æŒï¼Œå®æ—¶é¢„è§ˆ |
| EditAgent | **æ”¹å†™**ï¼šè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œå¯é€‰ RAG/ç½‘ç»œä¸Šä¸‹æ–‡<br>**ç¼©çŸ­**ï¼šå‹ç¼©åŒæ—¶ä¿ç•™å…³é”®ä¿¡æ¯<br>**æ‰©å±•**ï¼šæ·»åŠ ç»†èŠ‚å’Œä¸Šä¸‹æ–‡ |
| è‡ªåŠ¨æ ‡æ³¨ | è‡ªåŠ¨è¯†åˆ«å’Œæ ‡è®°å…³é”®å†…å®¹ |
| NarratorAgent | è„šæœ¬ç”Ÿæˆã€TTS éŸ³é¢‘ã€å¤šç§è¯­éŸ³ï¼ˆCherryã€Stellaã€Annieã€Callyã€Evaã€Bellaï¼‰ |
| ä¸Šä¸‹æ–‡å¢å¼º | å¯é€‰ RAG æˆ–ç½‘ç»œæœç´¢ |
| å¤šæ ¼å¼å¯¼å‡º | Markdownã€PDF ç­‰ |

**ä½¿ç”¨æ–¹æ³•**

1. è®¿é—® http://localhost:{frontend_port}/co_writer
2. åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥æˆ–ç²˜è´´æ–‡æœ¬
3. ä½¿ç”¨ AI åŠŸèƒ½ï¼šæ”¹å†™ã€ç¼©çŸ­ã€æ‰©å±•ã€è‡ªåŠ¨æ ‡æ³¨ã€å™è¿°
4. å¯¼å‡ºä¸º Markdown æˆ– PDF

<details>
<summary><b>è¾“å‡ºä½ç½®</b></summary>

```
data/user/co-writer/
â”œâ”€â”€ audio/                    # TTS éŸ³é¢‘æ–‡ä»¶
â”‚   â””â”€â”€ {operation_id}.mp3
â”œâ”€â”€ tool_calls/               # å·¥å…·è°ƒç”¨å†å²
â”‚   â””â”€â”€ {operation_id}_{tool_type}.json
â””â”€â”€ history.json              # ç¼–è¾‘å†å²
```

</details>

</details>

---

<details>
<summary><b>ğŸ”¬ æ·±åº¦ç ”ç©¶</b></summary>

<details>
<summary><b>æ¶æ„å›¾</b></summary>

![Deep Research Architecture](../../assets/figs/deepresearch.png)

</details>

> **DR-in-KG**ï¼ˆçŸ¥è¯†å›¾è°±ä¸­çš„æ·±åº¦ç ”ç©¶ï¼‰â€” åŸºäº **åŠ¨æ€è¯é¢˜é˜Ÿåˆ—** æ¶æ„çš„ç³»ç»ŸåŒ–æ·±ç ”ç³»ç»Ÿï¼Œæ”¯æŒä¸‰ä¸ªé˜¶æ®µçš„å¤šAgentåä½œï¼š**è§„åˆ’ â†’ ç ”ç©¶ â†’ æŠ¥å‘Š**ã€‚

**æ ¸å¿ƒç‰¹æ€§**

| ç‰¹æ€§ | æè¿° |
|:---:|:---|
| ä¸‰é˜¶æ®µæ¶æ„ | **é˜¶æ®µ 1ï¼ˆè§„åˆ’ï¼‰**ï¼šRephraseAgentï¼ˆè¯é¢˜ä¼˜åŒ–ï¼‰+ DecomposeAgentï¼ˆå­è¯é¢˜åˆ†è§£ï¼‰<br>**é˜¶æ®µ 2ï¼ˆç ”ç©¶ï¼‰**ï¼šManagerAgentï¼ˆé˜Ÿåˆ—è°ƒåº¦ï¼‰+ ResearchAgentï¼ˆç ”ç©¶å†³ç­–ï¼‰+ NoteAgentï¼ˆä¿¡æ¯å‹ç¼©ï¼‰<br>**é˜¶æ®µ 3ï¼ˆæŠ¥å‘Šï¼‰**ï¼šå»é‡ â†’ ä¸‰å±‚å¤§çº²ç”Ÿæˆ â†’ å¸¦å¼•ç”¨çš„æŠ¥å‘Šæ’°å†™ |
| åŠ¨æ€è¯é¢˜é˜Ÿåˆ— | æ ¸å¿ƒè°ƒåº¦ç³»ç»Ÿï¼ŒTopicBlock çŠ¶æ€ç®¡ç†ï¼š`PENDING â†’ RESEARCHING â†’ COMPLETED/FAILED`ã€‚æ”¯æŒç ”ç©¶æœŸé—´åŠ¨æ€è¯é¢˜å‘ç° |
| æ‰§è¡Œæ¨¡å¼ | **ä¸²è¡Œæ¨¡å¼**ï¼šé¡ºåºè¯é¢˜å¤„ç†<br>**å¹¶è¡Œæ¨¡å¼**ï¼šå¹¶å‘å¤šè¯é¢˜å¤„ç†ï¼Œä½¿ç”¨ `AsyncCitationManagerWrapper` ä¿è¯çº¿ç¨‹å®‰å…¨ |
| å¤šå·¥å…·é›†æˆ | **RAG**ï¼ˆhybrid/naiveï¼‰ã€**æŸ¥è¯¢é¡¹**ï¼ˆå®ä½“æŸ¥è¯¢ï¼‰ã€**è®ºæ–‡æœç´¢**ã€**ç½‘ç»œæœç´¢**ã€**ä»£ç æ‰§è¡Œ** â€” ç”± ResearchAgent åŠ¨æ€é€‰æ‹© |
| ç»Ÿä¸€å¼•ç”¨ç³»ç»Ÿ | ä»¥ CitationManager ä¸ºå”¯ä¸€çœŸå®æ¥æºï¼Œç”¨äºå¼•ç”¨ ID ç”Ÿæˆã€ref_number æ˜ å°„å’Œå»é‡ |
| é¢„è®¾é…ç½® | **quick**ï¼šå¿«é€Ÿç ”ç©¶ï¼ˆ1-2 ä¸ªå­è¯é¢˜ï¼Œ1-2 æ¬¡è¿­ä»£ï¼‰<br>**medium/standard**ï¼šå¹³è¡¡æ·±åº¦ï¼ˆ5 ä¸ªå­è¯é¢˜ï¼Œ4 æ¬¡è¿­ä»£ï¼‰<br>**deep**ï¼šæ·±å…¥ç ”ç©¶ï¼ˆ8 ä¸ªå­è¯é¢˜ï¼Œ7 æ¬¡è¿­ä»£ï¼‰<br>**auto**ï¼šAgent è‡ªä¸»å†³å®šæ·±åº¦ |

**å¼•ç”¨ç³»ç»Ÿæ¶æ„**

å¼•ç”¨ç³»ç»Ÿé‡‡ç”¨ä¸­å¿ƒåŒ–è®¾è®¡ï¼Œä»¥ CitationManager ä¸ºå”¯ä¸€çœŸå®æ¥æºï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CitationManager                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ID ç”Ÿæˆ        â”‚  â”‚  ref_number æ˜ å°„ â”‚  â”‚   å»é‡          â”‚  â”‚
â”‚  â”‚  PLAN-XX        â”‚  â”‚  citation_id â†’  â”‚  â”‚   (ä»…è®ºæ–‡)      â”‚  â”‚
â”‚  â”‚  CIT-X-XX       â”‚  â”‚  ref_number     â”‚  â”‚                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                    â”‚                    â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
     â”‚DecomposeAgentâ”‚      â”‚ReportingAgentâ”‚      â”‚ å‚è€ƒæ–‡çŒ®   â”‚
     â”‚ ResearchAgentâ”‚      â”‚ (å†…è” [N]) â”‚      â”‚  éƒ¨åˆ†      â”‚
     â”‚  NoteAgent   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ç»„ä»¶ | æè¿° |
|:---:|:---|
| ID æ ¼å¼ | **PLAN-XX**ï¼ˆè§„åˆ’é˜¶æ®µ RAG æŸ¥è¯¢ï¼‰+ **CIT-X-XX**ï¼ˆç ”ç©¶é˜¶æ®µï¼ŒX=å—ç¼–å·ï¼‰ |
| ref_number æ˜ å°„ | ä»æ’åºå¼•ç”¨ ID æ„å»ºçš„åºåˆ— 1-based æ•°å­—ï¼ŒåŒ…å«è®ºæ–‡å»é‡ |
| å†…è”å¼•ç”¨ | LLM è¾“å‡ºä¸­çš„ç®€å• `[N]` æ ¼å¼ï¼Œåå¤„ç†ä¸ºå¯ç‚¹å‡» `[[N]](#ref-N)` é“¾æ¥ |
| å¼•ç”¨è¡¨ | æä¾›ç»™ LLM çš„æ¸…æ™°å‚è€ƒè¡¨ï¼š`å¼•ç”¨ä¸º [1] â†’ (RAG) æŸ¥è¯¢é¢„è§ˆ...` |
| åå¤„ç† | è‡ªåŠ¨æ ¼å¼è½¬æ¢ + éªŒè¯ï¼Œç§»é™¤æ— æ•ˆå¼•ç”¨ |
| å¹¶è¡Œå®‰å…¨ | çº¿ç¨‹å®‰å…¨çš„å¼‚æ­¥æ–¹æ³•ï¼ˆ`get_next_citation_id_async`ã€`add_citation_async`ï¼‰ç”¨äºå¹¶å‘æ‰§è¡Œ |

**å¹¶è¡Œæ‰§è¡Œæ¶æ„**

å¯ç”¨ `execution_mode: "parallel"` æ—¶ï¼Œå¤šä¸ªè¯é¢˜å—å¹¶å‘ç ”ç©¶ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¹¶è¡Œç ”ç©¶æ‰§è¡Œ                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   DynamicTopicQueue                    AsyncCitationManagerWrapper      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚ è¯é¢˜ 1 (PENDING)â”‚ â”€â”€â”             â”‚  CitationManager çš„çº¿ç¨‹ â”‚      â”‚
â”‚   â”‚ è¯é¢˜ 2 (PENDING)â”‚ â”€â”€â”¼â”€â”€â†’ asyncio  â”‚  å®‰å…¨åŒ…è£…å™¨              â”‚      â”‚
â”‚   â”‚ è¯é¢˜ 3 (PENDING)â”‚ â”€â”€â”¤   Semaphore â”‚                         â”‚      â”‚
â”‚   â”‚ è¯é¢˜ 4 (PENDING)â”‚ â”€â”€â”¤   (max=5)   â”‚  â€¢ get_next_citation_   â”‚      â”‚
â”‚   â”‚ è¯é¢˜ 5 (PENDING)â”‚ â”€â”€â”˜             â”‚    id_async()           â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â€¢ add_citation_async() â”‚      â”‚
â”‚            â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚            â–¼                                       â”‚                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚              å¹¶å‘ ResearchAgent ä»»åŠ¡                          â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚      â”‚
â”‚   â”‚  â”‚ ä»»åŠ¡ 1  â”‚  â”‚ ä»»åŠ¡ 2  â”‚  â”‚ ä»»åŠ¡ 3  â”‚  â”‚ ä»»åŠ¡ 4  â”‚  ...   â”‚      â”‚
â”‚   â”‚  â”‚(è¯é¢˜ 1)â”‚  â”‚(è¯é¢˜ 2)â”‚  â”‚(è¯é¢˜ 3)â”‚  â”‚(è¯é¢˜ 4)â”‚        â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚      â”‚
â”‚   â”‚       â”‚            â”‚            â”‚            â”‚              â”‚      â”‚
â”‚   â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚      â”‚
â”‚   â”‚                         â”‚                                    â”‚      â”‚
â”‚   â”‚                         â–¼                                    â”‚      â”‚
â”‚   â”‚              AsyncManagerAgentWrapper                        â”‚      â”‚
â”‚   â”‚              (çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—æ›´æ–°)                              â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ç»„ä»¶ | æè¿° |
|:---:|:---|
| `asyncio.Semaphore` | å°†å¹¶å‘ä»»åŠ¡é™åˆ¶ä¸º `max_parallel_topics`ï¼ˆé»˜è®¤ï¼š5ï¼‰ |
| `AsyncCitationManagerWrapper` | ä½¿ç”¨ `asyncio.Lock()` åŒ…è£… CitationManagerï¼Œå®ç°çº¿ç¨‹å®‰å…¨çš„ ID ç”Ÿæˆ |
| `AsyncManagerAgentWrapper` | ç¡®ä¿è·¨å¹¶è¡Œä»»åŠ¡çš„é˜Ÿåˆ—çŠ¶æ€æ›´æ–°æ˜¯åŸå­çš„ |
| å®æ—¶è¿›åº¦ | æ‰€æœ‰æ´»è·ƒç ”ç©¶ä»»åŠ¡çš„å®æ—¶æ˜¾ç¤ºï¼Œå¸¦çŠ¶æ€æŒ‡ç¤ºå™¨ |

**Agent èŒè´£**

| Agent | é˜¶æ®µ | èŒè´£ |
|:---:|:---:|:---|
| RephraseAgent | è§„åˆ’ | ä¼˜åŒ–ç”¨æˆ·è¾“å…¥è¯é¢˜ï¼Œæ”¯æŒå¤šè½®ç”¨æˆ·äº¤äº’æ¥ä¼˜åŒ– |
| DecomposeAgent | è§„åˆ’ | ä½¿ç”¨ RAG ä¸Šä¸‹æ–‡åˆ†è§£è¯é¢˜ä¸ºå­è¯é¢˜ï¼Œä» CitationManager è·å–å¼•ç”¨ ID |
| ManagerAgent | ç ”ç©¶ | é˜Ÿåˆ—çŠ¶æ€ç®¡ç†ã€ä»»åŠ¡è°ƒåº¦ã€åŠ¨æ€è¯é¢˜æ·»åŠ  |
| ResearchAgent | ç ”ç©¶ | çŸ¥è¯†å……åˆ†æ€§æ£€æŸ¥ã€æŸ¥è¯¢è§„åˆ’ã€å·¥å…·é€‰æ‹©ã€åœ¨æ¯æ¬¡å·¥å…·è°ƒç”¨å‰è¯·æ±‚å¼•ç”¨ ID |
| NoteAgent | ç ”ç©¶ | å°†åŸå§‹å·¥å…·è¾“å‡ºå‹ç¼©ä¸ºæ‘˜è¦ï¼Œä½¿ç”¨é¢„åˆ†é…å¼•ç”¨ ID åˆ›å»º ToolTraces |
| ReportingAgent | æŠ¥å‘Š | æ„å»ºå¼•ç”¨æ˜ å°„ã€ç”Ÿæˆä¸‰å±‚å¤§çº²ã€æ’°å†™å¸¦å¼•ç”¨è¡¨çš„æŠ¥å‘Šç« èŠ‚ã€åå¤„ç†å¼•ç”¨ |

**æŠ¥å‘Šç”Ÿæˆç®¡é“**

```
1. æ„å»ºå¼•ç”¨æ˜ å°„    â†’  CitationManager.build_ref_number_map()
2. ç”Ÿæˆå¤§çº²       â†’  ä¸‰å±‚æ ‡é¢˜ï¼ˆH1 â†’ H2 â†’ H3ï¼‰
3. æ’°å†™ç« èŠ‚       â†’  LLM ä½¿ç”¨æä¾›çš„å¼•ç”¨è¡¨ä¸­çš„ [N] å¼•ç”¨
4. åå¤„ç†         â†’  è½¬æ¢ [N] â†’ [[N]](#ref-N)ï¼ŒéªŒè¯å¼•ç”¨
5. ç”Ÿæˆå‚è€ƒæ–‡çŒ®   â†’  å­¦æœ¯é£æ ¼æ¡ç›®ï¼Œå¯æŠ˜å æºè¯¦æƒ…
```

**ä½¿ç”¨æ–¹æ³•**

1. è®¿é—® http://localhost:{frontend_port}/research
2. è¾“å…¥ç ”ç©¶è¯é¢˜
3. é€‰æ‹©ç ”ç©¶æ¨¡å¼ï¼ˆquick/medium/deep/autoï¼‰
4. è§‚çœ‹å…·æœ‰å¹¶è¡Œ/ä¸²è¡Œæ‰§è¡Œçš„å®æ—¶è¿›åº¦
5. æŸ¥çœ‹å¸¦å¯ç‚¹å‡»å†…è”å¼•ç”¨çš„ç»“æ„åŒ–æŠ¥å‘Š
6. å¯¼å‡ºä¸º Markdown æˆ– PDFï¼ˆåŒ…å«æ­£ç¡®çš„é¡µé¢åˆ†å‰²å’Œ Mermaid å›¾æ”¯æŒï¼‰

<details>
<summary><b>CLI</b></summary>

```bash
# å¿«é€Ÿæ¨¡å¼ï¼ˆå¿«é€Ÿç ”ç©¶ï¼‰
python src/agents/research/main.py --topic "æ·±åº¦å­¦ä¹ åŸºç¡€" --preset quick

# ä¸­ç­‰æ¨¡å¼ï¼ˆå¹³è¡¡ï¼‰
python src/agents/research/main.py --topic "Transformer æ¶æ„" --preset medium

# æ·±åº¦æ¨¡å¼ï¼ˆæ·±å…¥ç ”ç©¶ï¼‰
python src/agents/research/main.py --topic "å›¾ç¥ç»ç½‘ç»œ" --preset deep

# è‡ªåŠ¨æ¨¡å¼ï¼ˆAgent è‡ªä¸»å†³å®šæ·±åº¦ï¼‰
python src/agents/research/main.py --topic "å¼ºåŒ–å­¦ä¹ " --preset auto
```

</details>

<details>
<summary><b>Python API</b></summary>

```python
import asyncio
from src.agents.research import ResearchPipeline
from src.core.core import get_llm_config, load_config_with_main

async def main():
    # åŠ è½½é…ç½®
    config = load_config_with_main("research_config.yaml")
    llm_config = get_llm_config()

    # åˆ›å»ºç®¡é“
    pipeline = ResearchPipeline(
        config=config,
        api_key=llm_config["api_key"],
        base_url=llm_config["base_url"],
        kb_name="ai_textbook"  # å¯é€‰ï¼šè¦†ç›–çŸ¥è¯†åº“
    )

    # è¿è¡Œç ”ç©¶
    result = await pipeline.run(topic="æ·±åº¦å­¦ä¹ ä¸­çš„æ³¨æ„åŠ›æœºåˆ¶")
    print(f"æŠ¥å‘Šä¿å­˜åˆ°: {result['final_report_path']}")

asyncio.run(main())
```

</details>

<details>
<summary><b>è¾“å‡ºä½ç½®</b></summary>

```
data/user/research/
â”œâ”€â”€ reports/                          # æœ€ç»ˆç ”ç©¶æŠ¥å‘Š
â”‚   â”œâ”€â”€ research_YYYYMMDD_HHMMSS.md   # å¸¦å¯ç‚¹å‡»å¼•ç”¨ [[N]](#ref-N) çš„ Markdown æŠ¥å‘Š
â”‚   â””â”€â”€ research_*_metadata.json      # ç ”ç©¶å…ƒæ•°æ®å’Œç»Ÿè®¡
â””â”€â”€ cache/                            # ç ”ç©¶è¿‡ç¨‹ç¼“å­˜
    â””â”€â”€ research_YYYYMMDD_HHMMSS/
        â”œâ”€â”€ queue.json                # DynamicTopicQueue çŠ¶æ€ï¼ˆTopicBlocks + ToolTracesï¼‰
        â”œâ”€â”€ citations.json            # å¼•ç”¨æ³¨å†Œè¡¨ï¼Œå¸¦ ID è®¡æ•°å™¨å’Œ ref_number æ˜ å°„
        â”‚                             #   - citations: {citation_id: citation_info}
        â”‚                             #   - counters: {plan_counter, block_counters}
        â”œâ”€â”€ step1_planning.json       # è§„åˆ’é˜¶æ®µç»“æœï¼ˆå­è¯é¢˜ + PLAN-XX å¼•ç”¨ï¼‰
        â”œâ”€â”€ planning_progress.json    # è§„åˆ’è¿›åº¦äº‹ä»¶
        â”œâ”€â”€ researching_progress.json # ç ”ç©¶è¿›åº¦äº‹ä»¶
        â”œâ”€â”€ reporting_progress.json   # æŠ¥å‘Šè¿›åº¦äº‹ä»¶
        â”œâ”€â”€ outline.json              # ä¸‰å±‚æŠ¥å‘Šå¤§çº²ç»“æ„
        â””â”€â”€ token_cost_summary.json   # Token ä½¿ç”¨ç»Ÿè®¡
```

**å¼•ç”¨æ–‡ä»¶ç»“æ„**ï¼ˆ`citations.json`ï¼‰ï¼š
```json
{
  "research_id": "research_20241209_120000",
  "citations": {
    "PLAN-01": {"citation_id": "PLAN-01", "tool_type": "rag_hybrid", "query": "...", "summary": "..."},
    "CIT-1-01": {"citation_id": "CIT-1-01", "tool_type": "paper_search", "papers": [...], ...}
  },
  "counters": {
    "plan_counter": 2,
    "block_counters": {"1": 3, "2": 2}
  }
}
```

</details>

<details>
<summary><b>é…ç½®é€‰é¡¹</b></summary>

`config/research_config.yaml` ä¸­çš„å…³é”®é…ç½®ï¼š

```yaml
# æ‰§è¡Œæ¨¡å¼
researching:
  execution_mode: "parallel"    # "series" æˆ– "parallel"
  max_parallel_topics: 5        # æœ€å¤§å¹¶å‘è¯é¢˜æ•°ï¼ˆå¹¶è¡Œæ¨¡å¼ä½¿ç”¨å¼‚æ­¥å¼•ç”¨æ–¹æ³•ï¼‰
  max_iterations: 5             # æ¯ä¸ªè¯é¢˜çš„æœ€å¤§è¿­ä»£æ¬¡æ•°

# å·¥å…·å¼€å…³
  enable_rag_hybrid: true       # Hybrid RAG æ£€ç´¢
  enable_rag_naive: true        # åŸºæœ¬ RAG æ£€ç´¢
  enable_paper_search: true     # å­¦æœ¯è®ºæ–‡æœç´¢
  enable_web_search: true       # ç½‘ç»œæœç´¢
  enable_run_code: true         # ä»£ç æ‰§è¡Œ

# é˜Ÿåˆ—é™åˆ¶
queue:
  max_length: 5                 # é˜Ÿåˆ—ä¸­çš„æœ€å¤§è¯é¢˜æ•°

# æŠ¥å‘Š
reporting:
  enable_inline_citations: true # å¯ç”¨æŠ¥å‘Šä¸­çš„å¯ç‚¹å‡» [N] å¼•ç”¨

# é¢„è®¾ï¼šquickã€mediumã€deepã€auto
```

</details>

</details>

---

<details>
<summary><b>ğŸ’¡ æƒ³æ³•ç”Ÿæˆ</b></summary>

<details>
<summary><b>æ¶æ„å›¾</b></summary>

![Idea Generation Architecture](../../assets/figs/ideagen.png)

</details>

> **ç ”ç©¶æƒ³æ³•ç”Ÿæˆç³»ç»Ÿ**ï¼Œä»ç¬”è®°æœ¬è®°å½•ä¸­æå–çŸ¥è¯†ç‚¹ï¼Œé€šè¿‡å¤šé˜¶æ®µè¿‡æ»¤ç”Ÿæˆç ”ç©¶æƒ³æ³•ã€‚

**æ ¸å¿ƒç‰¹æ€§**

| ç‰¹æ€§ | æè¿° |
|:---:|:---|
| MaterialOrganizerAgent | ä»ç¬”è®°æœ¬è®°å½•ä¸­æå–çŸ¥è¯†ç‚¹ |
| å¤šé˜¶æ®µè¿‡æ»¤ | **å®½æ¾è¿‡æ»¤** â†’ **æ¢ç´¢æƒ³æ³•**ï¼ˆæ¯ç‚¹ 5+ ä¸ªï¼‰â†’ **ä¸¥æ ¼è¿‡æ»¤** â†’ **ç”Ÿæˆ Markdown** |
| æƒ³æ³•æ¢ç´¢ | ä»å¤šä¸ªç»´åº¦è¿›è¡Œåˆ›æ–°æ€è€ƒ |
| ç»“æ„åŒ–è¾“å‡º | æŒ‰çŸ¥è¯†ç‚¹ç»„ç»‡çš„ Markdownï¼ŒåŒ…å«æƒ³æ³• |
| è¿›åº¦å›è°ƒ | æ¯ä¸ªé˜¶æ®µçš„å®æ—¶æ›´æ–° |

**ä½¿ç”¨æ–¹æ³•**

1. è®¿é—® http://localhost:{frontend_port}/ideagen
2. é€‰æ‹©åŒ…å«è®°å½•çš„ç¬”è®°æœ¬
3. å¯é€‰æä¾›ç”¨æˆ·æ€è€ƒ/åå¥½
4. ç‚¹å‡»"ç”Ÿæˆæƒ³æ³•"
5. æŸ¥çœ‹æŒ‰çŸ¥è¯†ç‚¹ç»„ç»‡çš„ç ”ç©¶æƒ³æ³•

<details>
<summary><b>Python API</b></summary>

```python
import asyncio
from src.agents.ideagen import IdeaGenerationWorkflow, MaterialOrganizerAgent
from src.core.core import get_llm_config

async def main():
    llm_config = get_llm_config()

    # ç¬¬ 1 æ­¥ï¼šä»ææ–™ä¸­æå–çŸ¥è¯†ç‚¹
    organizer = MaterialOrganizerAgent(
        api_key=llm_config["api_key"],
        base_url=llm_config["base_url"]
    )
    knowledge_points = await organizer.extract_knowledge_points(
        "æ‚¨çš„å­¦ä¹ ææ–™æˆ–ç¬”è®°æœ¬å†…å®¹"
    )

    # ç¬¬ 2 æ­¥ï¼šç”Ÿæˆç ”ç©¶æƒ³æ³•
    workflow = IdeaGenerationWorkflow(
        api_key=llm_config["api_key"],
        base_url=llm_config["base_url"]
    )
    result = await workflow.process(knowledge_points)
    print(result)  # Markdown æ ¼å¼åŒ–ç ”ç©¶æƒ³æ³•

asyncio.run(main())
```

</details>

</details>

---

<details>
<summary><b>ğŸ“Š ä»ªè¡¨ç›˜ + çŸ¥è¯†åº“ç®¡ç†</b></summary>

> **ç»Ÿä¸€ç³»ç»Ÿå…¥å£**ï¼Œæä¾›æ´»åŠ¨è¿½è¸ªã€çŸ¥è¯†åº“ç®¡ç†å’Œç³»ç»ŸçŠ¶æ€ç›‘æ§ã€‚

**å…³é”®ç‰¹æ€§**

| ç‰¹æ€§ | æè¿° |
|:---:|:---|
| æ´»åŠ¨ç»Ÿè®¡ | æœ€è¿‘çš„æ±‚è§£/ç”Ÿæˆ/ç ”ç©¶è®°å½• |
| çŸ¥è¯†åº“æ¦‚è§ˆ | KB åˆ—è¡¨ã€ç»Ÿè®¡ã€å¢é‡æ›´æ–° |
| ç¬”è®°æœ¬ç»Ÿè®¡ | ç¬”è®°æœ¬è®¡æ•°ã€è®°å½•åˆ†å¸ƒ |
| å¿«é€Ÿæ“ä½œ | ä¸€é”®è®¿é—®æ‰€æœ‰æ¨¡å— |

**ä½¿ç”¨æ–¹æ³•**

- **Web ç•Œé¢**ï¼šè®¿é—® http://localhost:{frontend_port} æŸ¥çœ‹ç³»ç»Ÿæ¦‚è§ˆ
- **åˆ›å»º KB**ï¼šç‚¹å‡»"æ–°å»ºçŸ¥è¯†åº“"ï¼Œä¸Šä¼  PDF/Markdown æ–‡æ¡£
- **æŸ¥çœ‹æ´»åŠ¨**ï¼šåœ¨ä»ªè¡¨ç›˜ä¸Šæ£€æŸ¥æœ€è¿‘çš„å­¦ä¹ æ´»åŠ¨

</details>

---

<details>
<summary><b>ğŸ““ ç¬”è®°æœ¬</b></summary>

> **ç»Ÿä¸€çš„å­¦ä¹ è®°å½•ç®¡ç†**ï¼Œè¿æ¥æ¥è‡ªæ‰€æœ‰æ¨¡å—çš„è¾“å‡ºï¼Œåˆ›å»ºä¸ªæ€§åŒ–å­¦ä¹ çŸ¥è¯†åº“ã€‚

**æ ¸å¿ƒç‰¹æ€§**

| ç‰¹æ€§ | æè¿° |
|:---:|:---|
| å¤šç¬”è®°æœ¬ç®¡ç† | åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ç¬”è®°æœ¬ |
| ç»Ÿä¸€è®°å½•å­˜å‚¨ | æ•´åˆæ±‚è§£/ç”Ÿæˆ/ç ”ç©¶/Co-Writer è®°å½• |
| åˆ†ç±»æ ‡ç­¾ | æŒ‰ç±»å‹ã€çŸ¥è¯†åº“è‡ªåŠ¨åˆ†ç±» |
| è‡ªå®šä¹‰å¤–è§‚ | é¢œè‰²ã€å›¾æ ‡ä¸ªæ€§åŒ– |

**ä½¿ç”¨æ–¹æ³•**

1. è®¿é—® http://localhost:{frontend_port}/notebook
2. åˆ›å»ºæ–°ç¬”è®°æœ¬ï¼ˆè®¾ç½®åç§°ã€æè¿°ã€é¢œè‰²ã€å›¾æ ‡ï¼‰
3. åœ¨å…¶ä»–æ¨¡å—å®Œæˆä»»åŠ¡åï¼Œç‚¹å‡»"æ·»åŠ åˆ°ç¬”è®°æœ¬"
4. åœ¨ç¬”è®°æœ¬é¡µé¢æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰è®°å½•

</details>

---

### ğŸ“– æ¨¡å—æ–‡æ¡£

<table>
<tr>
<td align="center"><a href="../../config/README.md">é…ç½®</a></td>
<td align="center"><a href="../../data/README.md">æ•°æ®ç›®å½•</a></td>
<td align="center"><a href="../../src/api/README.md">API åç«¯</a></td>
<td align="center"><a href="../../src/core/README.md">æ ¸å¿ƒå·¥å…·</a></td>
</tr>
<tr>
<td align="center"><a href="../../src/knowledge/README.md">çŸ¥è¯†åº“</a></td>
<td align="center"><a href="../../src/tools/README.md">å·¥å…·</a></td>
<td align="center"><a href="../../web/README.md">Web å‰ç«¯</a></td>
<td align="center"><a href="../../src/agents/solve/README.md">æ±‚è§£æ¨¡å—</a></td>
</tr>
<tr>
<td align="center"><a href="../../src/agents/question/README.md">é¢˜ç›®æ¨¡å—</a></td>
<td align="center"><a href="../../src/agents/research/README.md">ç ”ç©¶æ¨¡å—</a></td>
<td align="center"><a href="../../src/agents/co_writer/README.md">Co-Writer æ¨¡å—</a></td>
<td align="center"><a href="../../src/agents/guide/README.md">å¼•å¯¼æ¨¡å—</a></td>
</tr>
<tr>
<td align="center" colspan="4"><a href="../../src/agents/ideagen/README.md">æƒ³æ³•ç”Ÿæˆæ¨¡å—</a></td>
</tr>
</table>

---

## â“ å¸¸è§é—®é¢˜

<details>
<summary><b>åç«¯å¯åŠ¨å¤±è´¥ï¼Ÿ</b></summary>

**æ£€æŸ¥æ¸…å•**
- ç¡®è®¤ Python ç‰ˆæœ¬ >= 3.10
- ç¡®è®¤å·²å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š`pip install -r requirements.txt`
- æ£€æŸ¥ç«¯å£ 8001 æ˜¯å¦è¢«å ç”¨ï¼ˆå¯åœ¨ `config/main.yaml` ä¸­é…ç½®ï¼‰
- æ£€æŸ¥ `.env` æ–‡ä»¶é…ç½®

**è§£å†³æ–¹æ¡ˆ**
- **æ›´æ”¹ç«¯å£**ï¼šç¼–è¾‘ `config/main.yaml` ä¸­çš„ server.backend_port
- **æ£€æŸ¥æ—¥å¿—**ï¼šæŸ¥çœ‹ç»ˆç«¯é”™è¯¯æ¶ˆæ¯

</details>

<details>
<summary><b>Ctrl+C åç«¯å£è¢«å ç”¨ï¼Ÿ</b></summary>

**é—®é¢˜**

åœ¨è¿è¡Œä»»åŠ¡ï¼ˆä¾‹å¦‚æ·±åº¦ç ”ç©¶ï¼‰æœŸé—´æŒ‰ Ctrl+Cï¼Œé‡æ–°å¯åŠ¨æ˜¾ç¤º"ç«¯å£å·²åœ¨ä½¿ç”¨"é”™è¯¯ã€‚

**åŸå› **

Ctrl+C æœ‰æ—¶åªä¼šç»ˆæ­¢å‰ç«¯è¿›ç¨‹ï¼Œè€Œåç«¯ç»§ç»­åœ¨åå°è¿è¡Œã€‚

**è§£å†³æ–¹æ¡ˆ**

```bash
# macOS/Linuxï¼šæŸ¥æ‰¾å¹¶æ€æ­»è¿›ç¨‹
lsof -i :8001
kill -9 <PID>

# Windowsï¼šæŸ¥æ‰¾å¹¶æ€æ­»è¿›ç¨‹
netstat -ano | findstr :8001
taskkill /PID <PID> /F
```

ç„¶åç”¨ `python scripts/start_web.py` é‡æ–°å¯åŠ¨æœåŠ¡ã€‚

</details>

<details>
<summary><b>npm: command not found é”™è¯¯ï¼Ÿ</b></summary>

**é—®é¢˜**

è¿è¡Œ `scripts/start_web.py` æ˜¾ç¤º `npm: command not found` æˆ–é€€å‡ºçŠ¶æ€ 127ã€‚

**æ£€æŸ¥æ¸…å•**
- æ£€æŸ¥ npm æ˜¯å¦å·²å®‰è£…ï¼š`npm --version`
- æ£€æŸ¥ Node.js æ˜¯å¦å·²å®‰è£…ï¼š`node --version`
- ç¡®è®¤ conda ç¯å¢ƒå·²æ¿€æ´»ï¼ˆå¦‚æœä½¿ç”¨ condaï¼‰

**è§£å†³æ–¹æ¡ˆ**
```bash
# é€‰é¡¹ Aï¼šä½¿ç”¨ Condaï¼ˆæ¨èï¼‰
conda install -c conda-forge nodejs

# é€‰é¡¹ Bï¼šä½¿ç”¨å®˜æ–¹å®‰è£…ç¨‹åº
# ä» https://nodejs.org/ ä¸‹è½½

# é€‰é¡¹ Cï¼šä½¿ç”¨ nvm
nvm install 18
nvm use 18
```

**éªŒè¯å®‰è£…**
```bash
node --version  # åº”æ˜¾ç¤º v18.x.x æˆ–æ›´é«˜ç‰ˆæœ¬
npm --version   # åº”æ˜¾ç¤ºç‰ˆæœ¬å·
```

</details>

<details>
<summary><b>å‰ç«¯æ— æ³•è¿æ¥åç«¯ï¼Ÿ</b></summary>

**æ£€æŸ¥æ¸…å•**
- ç¡®è®¤åç«¯æ­£åœ¨è¿è¡Œï¼ˆè®¿é—® http://localhost:8001/docsï¼‰
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯æ¶ˆæ¯

**è§£å†³æ–¹æ¡ˆ**

åœ¨ `web` ç›®å½•åˆ›å»º `.env.local`ï¼š

```bash
NEXT_PUBLIC_API_BASE=http://localhost:8001
```

</details>

<details>
<summary><b>WebSocket è¿æ¥å¤±è´¥ï¼Ÿ</b></summary>

**æ£€æŸ¥æ¸…å•**
- ç¡®è®¤åç«¯æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- ç¡®è®¤ WebSocket URL æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**
- **æ£€æŸ¥åç«¯æ—¥å¿—**
- **ç¡®è®¤ URL æ ¼å¼**ï¼š`ws://localhost:8001/api/v1/...`

</details>

<details>
<summary><b>æ¨¡å—è¾“å‡ºå­˜å‚¨åœ¨å“ªé‡Œï¼Ÿ</b></summary>

| æ¨¡å— | è¾“å‡ºè·¯å¾„ |
|:---:|:---|
| æ±‚è§£ | `data/user/solve/solve_YYYYMMDD_HHMMSS/` |
| é¢˜ç›® | `data/user/question/question_YYYYMMDD_HHMMSS/` |
| ç ”ç©¶ | `data/user/research/reports/` |
| Co-Writer | `data/user/co-writer/` |
| ç¬”è®°æœ¬ | `data/user/notebook/` |
| å¼•å¯¼ | `data/user/guide/session_{session_id}.json` |
| æ—¥å¿— | `data/user/logs/` |

</details>

<details>
<summary><b>å¦‚ä½•æ·»åŠ æ–°çš„çŸ¥è¯†åº“ï¼Ÿ</b></summary>

**Web ç•Œé¢**
1. è®¿é—® http://localhost:{frontend_port}/knowledge
2. ç‚¹å‡»"æ–°å»ºçŸ¥è¯†åº“"
3. è¾“å…¥çŸ¥è¯†åº“åç§°
4. ä¸Šä¼  PDF/TXT/MD æ–‡æ¡£
5. ç³»ç»Ÿå°†åœ¨åå°å¤„ç†æ–‡æ¡£

**CLI**
```bash
python -m src.knowledge.start_kb init <kb_name> --docs <pdf_path>
```

</details>

<details>
<summary><b>å¦‚ä½•å‘ç°æœ‰çŸ¥è¯†åº“å¢é‡æ·»åŠ æ–‡æ¡£ï¼Ÿ</b></summary>

**CLIï¼ˆæ¨èï¼‰**
```bash
python -m src.knowledge.add_documents <kb_name> --docs <new_document.pdf>
```

**ä¼˜åŠ¿**
- ä»…å¤„ç†æ–°æ–‡æ¡£ï¼ŒèŠ‚çœæ—¶é—´å’Œ API æˆæœ¬
- è‡ªåŠ¨ä¸ç°æœ‰çŸ¥è¯†å›¾è°±åˆå¹¶
- ä¿ç•™æ‰€æœ‰ç°æœ‰æ•°æ®

</details>

<details>
<summary><b>æå–ç¼–å·é¡¹æ—¶å‡ºç° uvloop.Loop é”™è¯¯ï¼Ÿ</b></summary>

**é—®é¢˜**

åˆå§‹åŒ–çŸ¥è¯†åº“æ—¶ï¼Œå¯èƒ½é‡åˆ°æ­¤é”™è¯¯ï¼š
```
ValueError: Can't patch loop of type <class 'uvloop.Loop'>
```

è¿™æ˜¯å› ä¸º Uvicorn é»˜è®¤ä½¿ç”¨ `uvloop` äº‹ä»¶å¾ªç¯ï¼Œä¸ `nest_asyncio` ä¸å…¼å®¹ã€‚

**è§£å†³æ–¹æ¡ˆ**

ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€æå–ç¼–å·é¡¹ï¼š

```bash
# é€‰é¡¹ 1ï¼šä½¿ç”¨ shell è„šæœ¬ï¼ˆæ¨èï¼‰
./scripts/extract_numbered_items.sh <kb_name>

# é€‰é¡¹ 2ï¼šç›´æ¥ Python å‘½ä»¤
python src/knowledge/extract_numbered_items.py --kb <kb_name> --base-dir ./data/knowledge_bases
```

è¿™å°†ä»çŸ¥è¯†åº“ä¸­æå–ç¼–å·é¡¹ï¼ˆå®šä¹‰ã€å®šç†ã€æ–¹ç¨‹ç­‰ï¼‰ï¼Œæ— éœ€é‡æ–°åˆå§‹åŒ–ã€‚

</details>

<br>

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **[AGPL-3.0 è®¸å¯è¯](LICENSE)**ã€‚


## â­ Star å†å²

<div align="center">
<a href="https://star-history.com/#HKUDS/DeepTutor&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=HKUDS/DeepTutor&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=HKUDS/DeepTutor&type=Date" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=HKUDS/DeepTutor&type=Date" />
 </picture>
</a>
</div>


## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿æ¥è‡ªç¤¾åŒºçš„è´¡çŒ®ï¼ä¸ºç¡®ä¿ä»£ç è´¨é‡å’Œä¸€è‡´æ€§ï¼Œè¯·éµå¾ªä»¥ä¸‹å‡†åˆ™ã€‚

<details>
<summary><b>å¼€å‘è®¾ç½®</b></summary>

### Pre-commit Hooks è®¾ç½®

æ­¤é¡¹ç›®ä½¿ç”¨ **pre-commit hooks** åœ¨æäº¤å‰è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç å¹¶æ£€æŸ¥é—®é¢˜ã€‚

**ç¬¬ 1 æ­¥ï¼šå®‰è£… pre-commit**
```bash
# ä½¿ç”¨ pip
pip install pre-commit

# æˆ–ä½¿ç”¨ conda
conda install -c conda-forge pre-commit
```

**ç¬¬ 2 æ­¥ï¼šå®‰è£… Git hooks**
```bash
cd DeepTutor
pre-commit install
```

**ç¬¬ 3 æ­¥ï¼šï¼ˆå¯é€‰ï¼‰åœ¨æ‰€æœ‰æ–‡ä»¶ä¸Šè¿è¡Œæ£€æŸ¥**
```bash
pre-commit run --all-files
```

æ¯æ¬¡è¿è¡Œ `git commit` æ—¶ï¼Œpre-commit hooks å°†è‡ªåŠ¨ï¼š
- ä½¿ç”¨ Ruff æ ¼å¼åŒ– Python ä»£ç 
- ä½¿ç”¨ Prettier æ ¼å¼åŒ–å‰ç«¯ä»£ç 
- æ£€æŸ¥è¯­æ³•é”™è¯¯
- éªŒè¯ YAML/JSON æ–‡ä»¶
- æ£€æµ‹æ½œåœ¨å®‰å…¨é—®é¢˜

### ä»£ç è´¨é‡å·¥å…·

| å·¥å…· | ç›®çš„ | é…ç½® |
|:---:|:---|:---:|
| **Ruff** | Python ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ– | `pyproject.toml` |
| **Prettier** | å‰ç«¯ä»£ç æ ¼å¼åŒ– | `web/.prettierrc.json` |
| **detect-secrets** | å®‰å…¨æ£€æŸ¥ | `.secrets.baseline` |

> **æ³¨æ„**ï¼šé¡¹ç›®ä½¿ç”¨ **Ruff format** è€Œé Blackï¼Œä»¥é¿å…æ ¼å¼åŒ–å†²çªã€‚

### å¸¸ç”¨å‘½ä»¤

```bash
# æ­£å¸¸æäº¤ï¼ˆhooks è‡ªåŠ¨è¿è¡Œï¼‰
git commit -m "æ‚¨çš„æäº¤æ¶ˆæ¯"

# æ‰‹åŠ¨æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶
pre-commit run --all-files

# å°† hooks æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
pre-commit autoupdate

# è·³è¿‡ hooksï¼ˆä¸æ¨èï¼Œä»…ç”¨äºç´§æ€¥æƒ…å†µï¼‰
git commit --no-verify -m "ç´§æ€¥ä¿®å¤"
```

</details>

### è´¡çŒ®æŒ‡å—

1. **Fork å¹¶å…‹éš†**ï¼šFork ä»“åº“å¹¶å…‹éš†æ‚¨çš„ fork
2. **åˆ›å»ºåˆ†æ”¯**ï¼šä» `main` åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. **å®‰è£… Pre-commit**ï¼šæŒ‰ç…§ä¸Šè¿°è®¾ç½®æ­¥éª¤
4. **è¿›è¡Œæ›´æ”¹**ï¼šæŒ‰ç…§é¡¹ç›®é£æ ¼ç¼–å†™ä»£ç 
5. **æµ‹è¯•**ï¼šç¡®ä¿æ‚¨çš„æ›´æ”¹æ­£å¸¸å·¥ä½œ
6. **æäº¤**ï¼šPre-commit hooks å°†è‡ªåŠ¨æ ¼å¼åŒ–æ‚¨çš„ä»£ç 
7. **æ¨é€å’Œ PR**ï¼šæ¨é€åˆ°æ‚¨çš„ fork å¹¶åˆ›å»º Pull Request

### æŠ¥å‘Šé—®é¢˜

- ä½¿ç”¨ GitHub Issues æŠ¥å‘Š bug æˆ–å»ºè®®åŠŸèƒ½
- æä¾›é—®é¢˜çš„è¯¦ç»†ä¿¡æ¯
- å¦‚æœæ˜¯ bugï¼Œè¯·åŒ…å«é‡ç°æ­¥éª¤

<div align="center">
<br>
â¤ï¸ æˆ‘ä»¬æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„å®è´µè´¡çŒ®ã€‚

</div>

## ğŸ”— ç›¸å…³é¡¹ç›®

<div align="center">

| [âš¡ LightRAG](https://github.com/HKUDS/LightRAG) | [ğŸ¨ RAG-Anything](https://github.com/HKUDS/RAG-Anything) | [ğŸ’» DeepCode](https://github.com/HKUDS/DeepCode) | [ğŸ”¬ AI-Researcher](https://github.com/HKUDS/AI-Researcher) |
|:---:|:---:|:---:|:---:|
| ç®€å•å¿«é€Ÿçš„ RAG | å¤šæ¨¡æ€ RAG | AI ä»£ç åŠ©æ‰‹ | ç ”ç©¶è‡ªåŠ¨åŒ– |

**[é¦™æ¸¯å¤§å­¦æ•°æ®æ™ºèƒ½å®éªŒå®¤](https://github.com/HKUDS)**

[â­ Star us](https://github.com/HKUDS/DeepTutor/stargazers) Â· [ğŸ› Report a bug](https://github.com/HKUDS/DeepTutor/issues) Â· [ğŸ’¬ Discussions](https://github.com/HKUDS/DeepTutor/discussions)

---
*âœ¨ æ„Ÿè°¢è®¿é—® **DeepTutor**ï¼*

<img src="https://visitor-badge.laobi.icu/badge?page_id=HKUDS.DeepTutor&style=for-the-badge&color=00d4ff" alt="Views">

</div>
